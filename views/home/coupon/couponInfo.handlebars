
{{#section 'head'}}
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/couponInfo.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

{{/section}}


<div id="app">

    <img :src="couponImageHref(coupon.thumbnailImage)" class="infoImage">

	<div class="infoCard">
		<div class="card" style="background-color:#660000; border: 1px solid gray;">
			<div style="margin:10px; color:white;">
				<span style="font-size:1.2em">\{{coupon.couponName}}</span>
                <div style="font-size:1em">
    				<span>\{{coupon.couponRange}} </span><br>
                    <span>\{{coupon.hospitalName}}</span><br>
                    <span style="font-size:0.8em">(\{{coupon.address}})</span><br>
                    <span v-show="coupon.price">₩\{{coupon.price}}</span><br>
                    <a :href="hpvZeroHref()" style="color:white;"><button class="btn mobile-btn">支付<!--결제하기--></button></a>
                </div>
			</div>
		</div>
	</div>

	<img v-for="imageName in coupon.couponImage" :src="couponImageHref(imageName)" class="infoImage">
	<img src="/images/coupon/base/coupon_info.png" class="infoImage">

	<div class="infoCard">
		<div style="border: solid 1px white;">
			<div style="margin:10px; color:white;">
				[退款指南]<br>
				1. 请填写一下您的姓名,手机号码,购买的商品信息(医院名, 接种名),退款理由,银行账号(无存折入账时)发送给wechat. <br>
				2. 确认完商品是否使用后会一起进行退款处理. <br>
				3. 支付后10天之内由于改变主意而引起的退款行为是可以将购买金额进行100% 退款的. <br>支付10天后由于单纯改变主意而引起的退款除了购买金额的手续费5%外其他的可进行退款. (根据韩国公正交易法.) <br>医院访问咨询后若出现不适合进行接种的结果时与期间无关，购买金额100%可进行退款. <br>
				4. 退款金额根据微信,支付宝等方式的不同，最晚可能需要5天时间. <br>
			</div>
		</div>
	</div>

    <div class="infoCard">
        <div class="text-center">
            <button class="btn btn-primary below-btn" @click="toggleQuestion">提问{{!-- 질문하기 --}}</button>
            <button class="btn btn-primary below-btn" @click="toggleReview">写下后记{{!-- 리뷰남기기 --}}</button>
            <a :href="hpvZeroHref()" style="color:white;"><button class="btn btn-danger below-btn">支付<!--결제하기--></button></a>
        </div>
    </div>


    <div class="offset-md-2 col-md-8" id="contactInfo" style="background-color:#660000" v-show="questionToggle">
        <!-- coupon FAQ Form -->
        <hr class="my-5">
        <div class="card card-outline-secondary">
            <div class="card-body">
                <h5 class="text-center">\{{coupon.couponName}} &nbsp;&nbsp;Q&A</h5>
                <hr>
                <div class="form" role="form" id="question-form">
                    <div class="form-group">
                        <label for="cc_name">姓名<!--이름--></label>
                        <input type="text" class="form-control" v-model="newQuestion.name" placeholder="可以不用填写真实姓名"><!--실명을 적지 않으셔도 괜찮습니다.-->
                    </div>
                    <div class="form-group">
                        <label>一次性密码<!--비밀번호--></label>
                        <input type="text" class="form-control" v-model="newQuestion.password" placeholder="修改及删除时使用的一次性密码"><!--글 수정, 삭제에 사용할 일회용 비밀번호-->
                    </div>
                    <div class="form-group">
                        <label>微信账号<!--위챗아이디--></label>
                        <input type="text" class="form-control" v-model="newQuestion.wechatID" placeholder="提问后若想得到我们的答复请填写，不公开"><!--답이 달릴시에 연락받고싶다면 적어주세요. 공개되지 않습니다. -->
                    </div>
                    <div class="form-group">
                        <label>咨询事项<!--문의사항--></label>
                        <textarea rows="5" class="form-control" v-model="newQuestion.content" placeholder="请将想提问的问题进行填写，我们HaoDoc确认后会尽快回复您"><!--궁금하신 점을 적어주세요 하오닥이 확인 즉시 답해드립니다.--></textarea>
                    </div>
                    <hr>
                    <div class="form-group">
                        <button type="submit" class="btn mobile-btn" @click="addQuestion">咨询<!--문의하기--></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="offset-md-2 col-md-8" id="contactInfo" style="background-color:#660000" v-show="reviewToggle">
        <!-- coupon FAQ Form -->
        <hr class="my-5">
        <div class="card card-outline-secondary">
            <div class="card-body">
                <h5 class="text-center">\{{coupon.couponName}} &nbsp;&nbsp; <br>写下后记{{!-- 리뷰 작성 --}}</h5>
                <hr>
                <div class="form" role="form" id="question-form">
                    <div class="form-group">
                        <label for="cc_name">姓名<!--이름--></label>
                        <input type="text" class="form-control" v-model="newReview.name" placeholder="可以不用填写真实姓名"><!--실명을 적지 않으셔도 괜찮습니다.-->
                    </div>
                    <div class="form-group">
                        <label for="cc_name">满意度<!--만족도--></label><br>
                       5&nbsp; <input type="radio" value="5" v-model="newReview.score">
                       4&nbsp; <input type="radio" value="4" v-model="newReview.score">
                       3&nbsp; <input type="radio" value="3" v-model="newReview.score">
                       2&nbsp; <input type="radio" value="2" v-model="newReview.score">
                       1&nbsp; <input type="radio" value="1" v-model="newReview.score">
                    </div>

                    <div class="form-group">
                        <label for="cc_name">使用的优惠券<!--사용한 쿠--></label>
                        <input type="text" class="form-control" :placeholder="coupon.couponName" disabled="disabled"><!--실명을 적지 않으셔도 괜찮습니다.-->
                    </div>
                    <div class="form-group">
                        <label>一次性密码<!--비밀번호--></label>
                        <input type="text" class="form-control" v-model="newReview.password" placeholder="修改及删除时使用的一次性密码"><!--글 수정, 삭제에 사용할 일회용 비밀번호-->
                    </div>
                    <div class="form-group">
                        <label>微信账号<!--위챗아이디--></label>
                        <textarea rows="2" class="form-control" v-model="newReview.wechatID" placeholder="（选择项目）进行后记活动时为给予礼物所需，绝不公开" rows="2"></textarea><!--리뷰 이벤트 진행시에 선물 발송을 위해 수집됩니다. 외부에 공개 되지 않습니다.-->
                    </div>
                    <div class="form-group">
                        <label>使用后记<!--사용후기--></label>
                        <textarea rows="5" class="form-control" v-model="newReview.content" placeholder="请留下诊疗的专业性，亲切性，设施的清洁度等相关使用后记吧！大家的后记会给其他人很大的帮助"><!--진료의 전문성, 친절성, 시설의 청결도 등 사용 후기를 남겨주세요. 여러분의 후기가 다른 분들께 큰 도움이 됩니다.--></textarea>
                    </div>
                    <hr>
                    <div class="form-group">    
                        <button type="submit" class="btn mobile-btn" @click="newCouponReview">写下后记<!--리뷰남기기--></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    

<br><br><br><br>





<!-- coupon question -->
<div class="container">
	
    <h2 class="text-center" style="color:white;">Q&A</h2>
	
	<div class="card" v-for="(question, index) in coupon.questions">
	    <div class="card-body">
	        <div class="row">
        	    <div class="col-md-12">
        	        <p>
        	            <strong>\{{question.name}}</strong>
        	            <span class="float-right">\{{question.updated_at | moment}}</span>
        	       </p>
        	       <div class="clearfix"></div>
        	        <p>
                        Q\{{index}}.&nbsp;&nbsp;\{{question.content}}<a v-show="!question.answer" class="float-right btn btn-outline-primary ml-2" @click="changeAnswerIndex(index)"> <i class="fa fa-reply"></i> 回答<!--응답하기--></a>

                        <button class="btn btn-outline-primary float-right" @click="questionUpdate(index)" style="margin-bottom:5px;">修改<!--수정--></button>
                    </p>
        	        <p>
        	       </p>
        	    </div>
	        </div>
        	<div class="card card-inner" v-if="question.answer">
        	    <div class="card-body">
        	        <div class="row">
                	    <div class="col-md-12">
                	        <p>
                                <strong>\{{question.answer.name}}</strong>
                                <span class="float-right">\{{question.answer.updated_at | moment}}</span>
                            </p>
                	        <p>A. &nbsp;&nbsp;\{{question.answer.content}}</p>
                	    </div>
        	        </div>
        	    </div>
            </div>
	    </div>
	</div>
</div>

<br><br>



<div class="container">

    <h2 class="text-center" style="color:white;">Review</h2>


    <div class="card">
        <div class="card-body">
            <div class="row">

                <div class="col-md-12" v-for="review in couponReviews">
                    <p>
                        <a class="float-left"><strong>\{{review.name}}</strong></a>
                        <span class="float-right">\{{review.updated_at | moment}}</span><br>

                        <strong class="float-left" style="font-size:0.8em">\{{review.coupon.couponName}}</strong><br>
                        <strong class="float-left" style="font-size:0.7em">\{{review.coupon.hospitalName}}</strong>

                        <span class="float-right" v-for="n in review.score"><i class="text-warning fa fa-star"></i></span>
                   </p>
                    <div class="clearfix"></div>
                    <p>\{{review.content}}</p>
                    <br>
                </div>

            </div>
        </div>
    </div>

</div>


<br><br>

<!-- Answer Modal -->
<div class="modal fade" id="answerModal" tabindex="-1" role="dialog" aria-labelledby="answerModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="answerModalLabel">답글달기</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- coupon FAQ Form -->
		<div class="card card-outline-secondary">
		    <div class="card-body">
		        <div class="form" role="form" id="answer-form">
		            <div class="form-group">
		                <label for="cc_name">이름<!--이름--></label>
		                <input type="text" class="form-control" v-model="newAnswer.name" placeholder="응답자이름(HaoDoc)">
		            </div>
		            <div class="form-group">
		                <label>비밀번호<!--메모--></label>
		                <input type="text" class="form-control" v-model="newAnswer.password" placeholder="글 수정, 삭제에 사용할 일회용 비밀번호">
		            </div>
		            <div class="form-group">
		                <label>응답사항<!--메모--></label>
		                <textarea rows="5" class="form-control" v-model="newAnswer.content" placeholder="궁금하신 점을 적어주세요"></textarea>
		            </div>
		            <hr>
		        </div>
		    </div>
		</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="dismissAnswerModal">취소하기</button>
        <button type="button" class="btn btn-primary" @click="addAnswer" >답글 완성</button>
      </div>
    </div>
  </div>
</div>
<!-- / Answer Modal -->



<!-- question change modal -->
<div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="questionChangeModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="questionChangeModalLabel">Q & A</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- coupon FAQ Form -->
        <div class="card card-outline-secondary">
            <div class="card-body">
                <div class="form" role="form" id="answer-form">
                
                <div class="form-group">
                    <label for="cc_name">姓名<!--이름--></label>
                    <input type="text" class="form-control" v-model="changeQuestion.name" placeholder="可以不用填写真实姓名"><!--실명을 적지 않으셔도 괜찮습니다.-->
                </div>
                <div class="form-group">
                    <label>一次性密码<!--비밀번호--></label>
                    <input type="text" class="form-control" v-model="changeQuestion.password" placeholder="修改及删除时使用的一次性密码"><!--글 수정, 삭제에 사용할 일회용 비밀번호-->
                </div>
                <div class="form-group">
                    <label>微信账号<!--위챗아이디--></label>
                    <input type="text" class="form-control" v-model="changeQuestion.wechatID" placeholder="提问后若想得到我们的答复请填写，不公开"><!--답이 달릴시에 연락받고싶다면 적어주세요. 공개되지 않습니다. -->
                </div>
                <div class="form-group">
                    <label>咨询事项<!--문의사항--></label>
                    <textarea rows="5" class="form-control" v-model="changeQuestion.content" placeholder="请将想提问的问题进行填写，我们HaoDoc确认后会尽快回复您"><!--궁금하신 점을 적어주세요 하오닥이 확인 즉시 답해드립니다.--></textarea>
                </div>
                    <hr>
                </div>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="dismissQuestionChangeModal">取消{{!-- 취소 하기 --}}</button>
        <button type="button" class="btn btn-primary" @click="updateQuestion" >修改完成{{!-- 수정 완료 --}}</button>
      </div>
    </div>
  </div>
</div>
<!-- / question change modal -->

    <my-footer></my-footer>
</div>


{{#section 'jquery'}}
	<!-- Vue Controller 포함. -->
    <script type="text/javascript" src="/js/api/coupon.js"></script>
	<script type="text/javascript" src="/js/api/couponReview.js"></script>
	<script type="text/javascript" src="/js/controllers/event/couponInfoController.js"></script>
{{/section}}


